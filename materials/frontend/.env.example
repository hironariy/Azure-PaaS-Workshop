# =============================================================================
# Frontend Environment Configuration - LOCAL DEVELOPMENT
# =============================================================================
# This file is for LOCAL DEVELOPMENT with real Microsoft Entra ID authentication.
#
# PRODUCTION: Configuration is loaded from /config.json
# For Static Web Apps, this is created via SWA configuration
# See: /design/FrontendApplicationDesign.md
#
# Copy this file to .env.local for local development
# NEVER commit .env.local to version control
# =============================================================================

# =============================================================================
# Microsoft Entra ID - REQUIRED
# =============================================================================
# This workshop uses REAL Microsoft Entra ID authentication for both
# local development and production. You must configure these values.
#
# Get these values from Azure Portal > App registrations > Frontend SPA:
# - Client ID: Application (client) ID
# - Tenant ID: Directory (tenant) ID
#
# IMPORTANT: Add BOTH redirect URIs in the app registration:
#   - http://localhost:5173 (Vite direct)
#   - http://localhost:4280 (SWA CLI emulator)
#
# See /docs/entra-id-setup.md for detailed setup instructions.
# =============================================================================
VITE_ENTRA_CLIENT_ID=your-frontend-spa-client-id-here
VITE_ENTRA_TENANT_ID=your-tenant-id-here
VITE_ENTRA_REDIRECT_URI=http://localhost:5173

# Note: Change to http://localhost:4280 if using SWA CLI emulator as entry point
# VITE_ENTRA_REDIRECT_URI=http://localhost:4280

# =============================================================================
# Backend API App Registration (for token audience)
# =============================================================================
# This is the Application ID URI or Client ID of your Backend API registration.
# The frontend requests tokens with this as the scope/audience.
# Get from Azure Portal > App registrations > Backend API
VITE_API_CLIENT_ID=your-backend-api-client-id-here

# =============================================================================
# API Configuration
# =============================================================================
# For local development, Vite proxy handles API requests (see vite.config.ts)
# VITE_API_BASE_URL=http://localhost:8080

# =============================================================================
# Local Development Ports Reference
# =============================================================================
# | Service               | Port   | Access URL                           |
# |-----------------------|--------|--------------------------------------|
# | Vite dev server       | 5173   | http://localhost:5173 (main entry)   |
# | Backend API           | 8080   | http://localhost:8080                |
# | MongoDB               | 27017  | (backend connects directly)          |
# | Mongo Express         | 8081   | http://localhost:8081                |
# =============================================================================

# =============================================================================
# Authentication Flow
# =============================================================================
# 1. User clicks "Sign In" in the app
# 2. MSAL redirects to: https://login.microsoftonline.com/{tenant}/oauth2/v2.0/authorize
# 3. User authenticates with Microsoft account
# 4. Microsoft redirects back to: http://localhost:5173 (VITE_ENTRA_REDIRECT_URI)
# 5. MSAL exchanges authorization code for tokens
# 6. Frontend includes access token in API requests as Bearer token
# 7. Backend validates JWT against Entra ID JWKS endpoint
# =============================================================================

# =============================================================================
# PRODUCTION CONFIGURATION REFERENCE
# =============================================================================
# In production (Azure Static Web Apps), set these as Application Settings:
# - VITE_ENTRA_CLIENT_ID
# - VITE_ENTRA_TENANT_ID  
# - VITE_API_CLIENT_ID
# - VITE_ENTRA_REDIRECT_URI (set to your SWA URL)
#
# Or use runtime config from /config.json
# =============================================================================
